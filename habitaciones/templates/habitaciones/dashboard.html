{% extends 'base.html' %}
{% load humanize %}

{% block title %}Dashboard - Habitaciones{% endblock %}

{% block content %}
<h2 class="mb-4">Estado de Habitaciones</h2>

<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
{% for hab in habitaciones %}
  <div class="col">
    <div class="card hab-card shadow-sm h-100">
      <div class="card-header 
        {% if hab.estado == 'disponible' %}bg-success text-white
        {% elif hab.estado == 'ocupada' %}bg-danger text-white
        {% elif hab.estado == 'reservada' %}bg-info text-white
        {% else %}bg-warning{% endif %}">
        <h5 class="mb-0">Habitación {{ hab.numero }}</h5>
      </div>

      <div class="card-body">
        <h6 class="card-title">{{ hab.tipo.nombre }}</h6>
        <p class="card-text">
          <strong>Estado:</strong> 
          <span class="badge bg-secondary">{{ hab.get_estado_display }}</span><br>
          <strong>Capacidad:</strong> {{ hab.tipo.max_personas }} personas<br>
          <strong>Precio:</strong> ${{ hab.tipo.precio_por_noche|floatformat:0 }}
        </p>
      </div>

      <div class="card-footer">
        {% if hab.estado == 'disponible' %}
          <a href="{% url 'reserva_nueva' hab.id %}" class="btn btn-success btn-sm w-100">
            <i class="fas fa-plus"></i> Reservar
          </a>
        {% else %}
          <button class="btn btn-secondary btn-sm w-100" disabled>
            <i class="fas fa-ban"></i> No disponible
          </button>
        {% endif %}
      </div>
    </div>
  </div>
{% empty %}
  <div class="col-12">
    <div class="alert alert-info text-center">
      <i class="fas fa-info-circle fa-3x mb-3"></i>
      <h4>No hay habitaciones registradas</h4>
      <p>Agregá habitaciones desde el <a href="/admin/">administrador</a></p>
    </div>
  </div>
{% endfor %}
</div>
{% endblock %}